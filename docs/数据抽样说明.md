# 数据抽样说明

## 背景

根据项目要求，数据规模需要控制在**10MB以内**。原始数据集（`diabetic_data.csv`）大小为18MB，超过了要求。

## 解决方案

使用**分层抽样**方法，按再入院情况（`readmitted`）进行分层抽样，确保抽样后数据仍能保持原始数据的分布特征。

## 抽样结果

- **原始数据**：101,766条记录，18MB
- **抽样后数据**：16,777条记录，2.88MB
- **抽样比例**：16.5%
- **文件位置**：`data/raw/diabetes_130_us_hospitals_1999_2008/diabetic_data_sampled.csv`

## 分布保持情况

抽样后保持了再入院情况的分布：

| 再入院情况 | 原始数据 | 抽样后数据 | 比例保持 |
|-----------|---------|-----------|---------|
| NO（未再入院） | 54,864 (53.9%) | 9,045 (53.9%) | ✅ |
| >30（30天后再入院） | 35,545 (34.9%) | 5,860 (34.9%) | ✅ |
| <30（30天内再入院） | 11,357 (11.2%) | 1,872 (11.2%) | ✅ |

## 使用说明

1. **数据清洗脚本**（`code/03_data_cleaning.py`）已自动配置为优先使用抽样后的数据
2. 如果抽样数据不存在，会自动回退到使用原始数据
3. 所有后续分析都基于抽样后的数据进行

## 代码文件

- **抽样脚本**：`code/05_data_sampling.py`
- **使用方法**：
  ```bash
  cd code
  python 05_data_sampling.py
  ```

## 注意事项

- 抽样后的数据仍能代表原始数据的特征
- 30天内再入院率保持为11.2%，与原始数据一致
- 所有变量和关系都得到保留
- 数据质量未受影响

---

**结论**：通过分层抽样，成功将数据规模控制在10MB以内（2.88MB），同时保持了数据的代表性和分布特征。

