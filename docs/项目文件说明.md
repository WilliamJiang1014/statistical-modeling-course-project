# 项目文件说明

本文档详细说明项目的文件结构和各文件的用途。

## 一、项目根目录

- **README.md** - 项目主README文件，包含项目概述、运行说明等
- **requirements.txt** - Python依赖包列表

## 二、code/ 目录

核心代码文件（按执行顺序）：

1. **01_data_exploration.py** - 数据探索与基本信息统计
   - 输出：数据基本信息（已整合到项目报告中）

2. **02_variable_documentation.py** - 变量说明表生成
   - 输出：`docs/02_variable_documentation.csv`（变量说明表）

3. **03_data_cleaning.py** - 数据清洗流程
   - 输出：`data/processed/diabetic_data_cleaned.csv`（清洗后的数据）

4. **04_eda_visualization.py** - 探索性数据分析与可视化
   - 输出：`docs/figures/` 目录下的6张EDA图表（01-06）

5. **05_data_sampling.py** - 数据抽样（控制数据规模）
   - 输出：`data/raw/diabetes_130_us_hospitals_1999_2008/diabetic_data_sampled.csv`（16,777条记录，2.9MB）

6. **06_feature_engineering.R** - 特征工程与数据分割（成员B - R语言）
   - 输出：`data/processed/diabetic_data_featured.csv`、`data/processed/data_splits.rds`
   - 运行方式：在R或RStudio中运行 `source("code/06_feature_engineering.R")`

7. **07_regression_model.R** - 回归模型（住院天数预测）（成员B - R语言）
   - 输出：`models/regression_model.rds`、`docs/figures/07-08_*.png`（2张图表）
   - 运行方式：在R或RStudio中运行 `source("code/07_regression_model.R")`

8. **08_classification_model.R** - 分类模型（30天再入院预测）（成员B - R语言）
   - 输出：`models/classification_model.rds`、`docs/figures/09-12_*.png`（4张图表）
   - 运行方式：在R或RStudio中运行 `source("code/08_classification_model.R")`

9. **09_shiny_app/app.R** - Shiny交互式Web系统（成员B - R语言）
   - 运行方式：在R或RStudio中运行 `shiny::runApp("code/09_shiny_app")`

## 三、data/ 目录

### data/raw/ - 原始数据目录

- `diabetes_130_us_hospitals_1999_2008/` - 原始数据目录
  - **diabetic_data.csv** - 原始糖尿病住院数据
    - 规模：101,766条记录，50个变量，18MB
    - 来源：UCI Machine Learning Repository
  - **diabetic_data_sampled.csv** - 抽样后的数据
    - 规模：16,777条记录，50个变量，2.9MB
    - 方法：分层抽样（按再入院情况分层）
    - 说明：符合项目10MB数据规模要求
  - **IDS_mapping.csv** - ID映射表
    - 内容：入院类型、出院去向、入院来源的ID与名称映射关系

### data/processed/ - 处理后数据目录

- **diabetic_data_cleaned.csv** - 清洗后的数据（16,777条记录，53个变量，4.0MB）
- **diabetic_data_featured.csv** - 特征工程后数据
- **data_splits.rds** - 训练/测试集分割结果（80/20，R格式）

## 四、models/ 目录

- **regression_model.rds** - 回归模型文件（R格式）
  - 模型类型：多元线性回归（使用R的`lm()`函数）
  - 用途：预测住院天数
  - 生成脚本：`code/07_regression_model.R`
  - 加载方式：`readRDS("models/regression_model.rds")`
- **classification_model.rds** - 分类模型文件（R格式）
  - 模型类型：Logistic回归（使用R的`glm(family=binomial)`函数）
  - 用途：预测30天再入院风险
  - 生成脚本：`code/08_classification_model.R`
  - 加载方式：`readRDS("models/classification_model.rds")`

## 五、docs/ 目录

### 文档文件

- **02_variable_documentation.csv** - 变量说明表
  - 内容：所有变量的名称、类型、描述等信息
  - 用途：用于项目报告
- **项目文件说明.md** - 本文件，项目文件结构详细说明
- **图表分析结论.md** - EDA图表分析结论
  - 内容：每张EDA图表的分析结论
  - 用途：用于项目报告和PPT
- **建模技术说明.md** - 建模技术详细说明
  - 内容：特征工程方法、模型构建流程、评估指标、模型诊断等
  - 用途：技术文档，用于报告和答辩
- **数据抽样说明.md** - 数据抽样方法说明
  - 内容：数据抽样方法、结果、分布保持情况等
- **成员B_模型结果摘要.md** - 模型结果摘要
  - 内容：模型评估结果、关键影响因素、模型解读等

### docs/figures/ - 可视化图表目录

- **EDA图表**（01-06）：再入院分布、住院天数分布、人口学特征、分组分析、相关性热力图
- **模型图表**（07-12）：回归系数、模型诊断、OR值、混淆矩阵、ROC曲线、概率分布

## 六、注意事项

1. **路径设置**：所有代码文件中的路径均为相对路径，请确保在项目根目录下运行
2. **依赖安装**：
   - Python脚本（成员A）：`pip install -r requirements.txt`
   - R脚本（成员B）：在R中运行 `source("install_packages.R")`
3. **数据文件**：如果数据文件不存在，需要先运行数据准备脚本
4. **模型文件**：如果模型文件不存在，需要先运行模型构建脚本
5. **工作目录**：运行R脚本时，确保工作目录设置为项目根目录
6. **文件格式**：
   - Python脚本生成`.pkl`文件（仅用于成员A的数据处理）
   - R脚本生成`.rds`文件（用于成员B的建模和系统）
